<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>注册</title>
<link rel="stylesheet" href="/JavaEE/bootstrap/css/bootstrap.min.css">
<script src="/JavaEE/bootstrap/jquery-1.11.3.min.js"></script>
<script src="/JavaEE/bootstrap/bootstrap.min.js"></script>
</head>
<body>
	<div class="container-fluid">
		<!-- 顶部内容 -->
		<div class="container-fluid">
			<!-- 菜单栏 -->
			<div class="container-fluid">
				<div class="row">
					<div class="col-md-4">
						<img alt="图片无法显示" src="/JavaEE/img/logo2.png">
					</div>
					<div class="col-md-5">
						<img alt="图片无法显示" src="/JavaEE/img/header.png">
					</div>
					<div class="col-md-3" style="padding-top: 20px">
						<ol class="list-inline">
							<li><a href="login.html">登录</a></li>
							<li><a href="">购物车</a></li>
							<li><a href="">我的订单</a></li>
							<li><a href="">退出登陆</a></li>
						</ol>
					</div>
				</div>
			</div>
			<!-- 导航条 -->
			<div class="container-fluid">
				<nav class="navbar navbar-inverse">
					<div class="container-fluid">
						<!-- Brand and toggle get grouped for better mobile display -->
						<div class="navbar-header">
							<button type="button" class="navbar-toggle collapsed"
								data-toggle="collapse"
								data-target="#bs-example-navbar-collapse-1"
								aria-expanded="false">
								<span class="sr-only">Toggle navigation</span> <span
									class="icon-bar"></span> <span class="icon-bar"></span> <span
									class="icon-bar"></span>
							</button>
							<a class="navbar-brand" href="index.html">首页</a>
						</div>

						<!-- Collect the nav links, forms, and other content for toggling -->
						<div class="collapse navbar-collapse"
							id="bs-example-navbar-collapse-1">
							<form class="navbar-form navbar-right" role="search">
								<div class="form-group">
									<input type="text" class="form-control" placeholder="Search">
								</div>
								<button type="submit" class="btn btn-default">Submit</button>
							</form>
						</div>
						<!-- /.navbar-collapse -->
					</div>
					<!-- /.container-fluid -->
				</nav>
			</div>
		</div>

		<!-- 主体内容 -->
		<div class="container-fluid">
			<div class="container-fluid"
				style="width: 97.8%; background: url('/JavaEE/img/regist_bg.jpg');">
				<div class="row">
					<div class="col-md-2"></div>
					<div class="col-md-8"
						style="background: #fff; padding: 40px 80px; margin: 30px; border: 7px solid #ccc;">
						<font size="4">会员注册</font>&nbsp;&nbsp;USER REGISTER
						<form action="/JavaEE/user?method=regist" method="post"
							id="registForm" onsubmit="return checkUserTip();"
							class="form-horizontal" style="margin: 15px 0 0 0;">
							<div class="form-group">
								<label for="username" class="col-sm-2 control-label">用户名</label>
								<div class="col-sm-6" id="check-username">
									<input type="text" name="username" required="required"
										id="username" class="form-control" placeholder="请输入用户名">
								</div>
							</div>
							<div class="form-group">
								<label for="exampleInputPassword1"
									class="col-sm-2 control-label">密码</label>
								<div class="col-sm-6">
									<input type="password" required="required" class="form-control"
										id="exampleInputPassword1" placeholder="请输入密码">
								</div>
							</div>
							<div class="form-group">
								<label for="exampleInputPassword2"
									class="col-sm-2 control-label">确认密码</label>
								<div class="col-sm-6">
									<input type="password" name="password" required="required"
										class="form-control" id="exampleInputPassword2"
										placeholder="请输入确认密码">
								</div>
							</div>
							<div class="form-group">
								<label for="exampleInputEmail1" class="col-sm-2 control-label">Email</label>
								<div class="col-sm-6">
									<input type="email" name="email" class="form-control"
										id="exampleInputEmail1" placeholder="Email">
								</div>
							</div>
							<div class="form-group">
								<label for="exampleInputTel1" class="col-sm-2 control-label">Telephone</label>
								<div class="col-sm-6">
									<input type="tel" name="telephone" class="form-control"
										id="exampleInputTel1" placeholder="Email">
								</div>
							</div>
							<div class="form-group">
								<label for="exampleInputText2" class="col-sm-2 control-label">姓名</label>
								<div class="col-sm-6">
									<input type="text" name="name" class="form-control"
										id="exampleInputText2" placeholder="请输入姓名">
								</div>
							</div>
							<div class="form-group">
								<label for="exampleInputRadio1" class="col-sm-2 control-label">性别</label>
								<div class="col-sm-6">
									<input type="radio" name="sex" value="男"
										id="exampleInputRadio1" placeholder="男"><label
										for="exampleInputRadio1">男</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
									<input type="radio" name="sex" value="女"
										id="exampleInputRadio2" placeholder="女"><label
										for="exampleInputRadio2">女</label>
								</div>
							</div>
							<div class="form-group">
								<label for="exampleInputDate1" class="col-sm-2 control-label">出生日期</label>
								<div class="col-sm-6">
									<input type="date" name="birthday" class="form-control"
										id="exampleInputDate1" placeholder="年/月/日">
								</div>
							</div>
							<div class="form-group">
								<label for="exampleCheck1" class="col-sm-2 control-label">验证码</label>
								<div class="col-sm-2">
									<input type="text" id="exampleCheck1" class="form-control">
								</div>
								<div class="col-sm-2">
									<img alt="校验码无法显示" src="/JavaEE/img/captcha.jhtml">
								</div>
							</div>
							<div id="tip1" style="display: none;">
								<b style="color: red;">用户名、密码不可为空</b>
							</div>
							<div class="form-group">
								<div class="col-sm-offset-2 col-sm-10">
									<input type="submit" value="注册"
										style="background: url('/JavaEE/img/register.gif') no-repeat scroll 0 0 rgba(0, 0, 0, 0); height: 35px; width: 100px; color: white;">
								</div>
							</div>
						</form>
					</div>
					<div class="col-md-2"></div>
				</div>
			</div>
		</div>

		<!-- 底部内容 -->
		<div class="container-fluid">
			<div class="container-fluid" style="margin-top: 50px;">
				<img src="/JavaEE/img/footer.jpg" width="100%" height="78" alt="我们的优势"
					title="我们的优势" />
			</div>

			<div class="container-fluid"
				style="text-align: center; margin-top: 5px;">
				<ul class="list-inline">
					<li><a href="info.html">关于我们</a></li>
					<li><a>联系我们</a></li>
					<li><a>招贤纳士</a></li>
					<li><a>法律声明</a></li>
					<li><a>友情链接</a></li>
					<li><a>支付方式</a></li>
					<li><a>配送方式</a></li>
					<li><a>服务声明</a></li>
					<li><a>广告声明</a></li>
				</ul>
			</div>
			<div
				style="text-align: center; margin-top: 5px; margin-bottom: 20px;">
				Copyright &copy; 2005-2016 传智商城 版权所有</div>
		</div>
	</div>
	<script type="text/javascript" src="/JavaEE/js/utils.js"></script>
	<script type="text/javascript">
		//异步校验用户名是否存在
		Utils.on(document.getElementById("username"), "blur", function() {
			var node = '';
			if (Utils.strIsBlank(this.value)) {
				node = document.createTextNode("请输入正确的用户名。");
				checkNameTip(node);
			} else {
				//异步校验
				Utils.async("post", {
					username : this.value
				}, "/JavaEE/user?method=checkNameRegist", function(data) {
					debugger;
					if (200 != data.code) {
						node = document.createTextNode(data.msg);
						checkNameTip(node);
					}
				}, true, 'json');
			}

		});

		//校验是否存在，存在则阻止表单提交
		function checkUserTip() {
			var flag = true;
			var formData = new FormData(document.getElementById("registForm"));
			Utils.async("post", convert_FormData_to_json(formData),
					"/JavaEE/user?method=checkNameRegist", function(data) {
						if (200 != data.code) {
							flag = false;//阻止表单提交
							var tip1 = document.getElementById("tip1");
							tip1.style.display = "";
							tip1.innerHTML = '<b style="color: red;">'
									+ data.msg + '</b>';
							//隐藏提示
							setTimeout(function() {
								tip1.style.display = "none";
							}, 1500);
						}
					}, false, 'json');
			return flag;
		}

		function checkNameTip(node) {
			//创建元素，并显示
			var newSubE = document.createElement("b");
			newSubE.style = 'color: red;';
			newSubE.appendChild(node);

			var parentE = document.getElementById("check-username");
			var exitSubE = document.getElementById("username");
			parentE.appendChild(newSubE, exitSubE);

			//1s删除新创建的元素
			setTimeout(function() {
				parentE.removeChild(newSubE);
			}, 1500);
		}
	</script>
</body>
</html>